(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[0],{19:function(t,e,n){"use strict";n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return u}));var r=function(t){return t.auth.isLoggedIn},c=function(t){return t.auth.user.email},u=function(t){return t.auth.user.name}},23:function(t,e,n){"use strict";var r=n(17),c=n.n(r),u=n(4);c.a.defaults.baseURL="https://connections-api.herokuapp.com";var a=function(t){c.a.defaults.headers.common.Authorization="Bearer ".concat(t)},o=function(){c.a.defaults.headers.common.Authorization=""};e.a={register:function(t){return function(e){e(u.a.registerRequest()),c.a.post("/users/signup",t).then((function(t){a(t.data.token),e(u.a.registerSuccess(t.data))})).catch((function(t){return e(u.a.registerError(t.message))}))}},login:function(t){return function(e){e(u.a.loginRequest()),c.a.post("/users/login",t).then((function(t){a(t.data.token),e(u.a.loginSuccess(t.data))})).catch((function(t){return e(u.a.loginError(t.message))}))}},logout:function(){return function(t){t(u.a.logoutRequest()),c.a.post("/users/logout").then((function(){o(),t(u.a.logoutSuccess())})).catch((function(e){return t(u.a.logoutError(e.message))}))}},getCurrentUser:function(){return function(t,e){var n=e().auth.token;n&&(a(n),t(u.a.getCurrentUserRequest),c.a.get("/users/current").then((function(e){return t(u.a.getCurrentUserSuccess(e.data))})).catch((function(e){return t(u.a.getCurrentUserError(e.message))})))}}}},28:function(t,e,n){t.exports={userMenu:"UserMenu_userMenu__10Rq8",userEmail:"UserMenu_userEmail__2ct5G"}},37:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(2),c=Object(r.b)("changeFilter")},4:function(t,e,n){"use strict";var r=n(2),c=Object(r.b)("auth/registerRequest"),u=Object(r.b)("auth/registerSuccess"),a=Object(r.b)("auth/registerError"),o=Object(r.b)("auth/loginRequest"),i=Object(r.b)("auth/loginSuccess"),s=Object(r.b)("auth/loginError"),b=Object(r.b)("auth/logoutRequest"),j=Object(r.b)("auth/logoutSuccess"),l=Object(r.b)("auth/logoutError"),O=Object(r.b)("auth/getCurrentUserRequest"),f=Object(r.b)("auth/getCurrentUserSuccess"),d=Object(r.b)("auth/getCurrentUserError");e.a={registerRequest:c,registerSuccess:u,registerError:a,loginRequest:o,loginSuccess:i,loginError:s,logoutRequest:b,logoutSuccess:j,logoutError:l,getCurrentUserRequest:O,getCurrentUserSuccess:f,getCurrentUserError:d}},48:function(t,e,n){t.exports={userMenu:"AuthMenu_userMenu__UcqyA",userEmail:"AuthMenu_userEmail__2XGAU"}},58:function(t,e,n){},8:function(t,e,n){"use strict";n.d(e,"b",(function(){return c})),n.d(e,"c",(function(){return u})),n.d(e,"a",(function(){return a})),n.d(e,"e",(function(){return o})),n.d(e,"f",(function(){return i})),n.d(e,"d",(function(){return s})),n.d(e,"h",(function(){return b})),n.d(e,"i",(function(){return j})),n.d(e,"g",(function(){return l}));var r=n(2),c=Object(r.b)("entry/addEntryRequest"),u=Object(r.b)("entry/addEntrySuccess"),a=Object(r.b)("entry/addEntryError"),o=Object(r.b)("entry/deleteEntryRequest"),i=Object(r.b)("entry/deleteEntrySuccess"),s=Object(r.b)("entry/deleteEntryError"),b=Object(r.b)("entry/fetchEntriesRequest"),j=Object(r.b)("entry/fetchEntriesSuccess"),l=Object(r.b)("entry/fetchEntriesError")},80:function(t,e,n){"use strict";n.r(e);var r,c,u,a,o,i,s,b=n(0),j=n.n(b),l=n(24),O=n.n(l),f=n(15),d=n(13),g=n(26),h=n(7),p=n(2),m=n(16),y=n(3),E=n(8),x=Object(p.c)([],(r={},Object(y.a)(r,E.i,(function(t,e){return e.payload})),Object(y.a)(r,E.c,(function(t,e){var n=e.payload;return[].concat(Object(g.a)(t),[{name:n.name,number:n.number,id:n.id}])})),Object(y.a)(r,E.f,(function(t,e){var n=e.payload;return t.filter((function(t){return t.id!==n}))})),r)),v=Object(p.c)("",(c={},Object(y.a)(c,E.g,(function(t,e){var n=e.payload;return alert("Error : ".concat(n)),n})),Object(y.a)(c,E.a,(function(t,e){var n=e.payload;return alert("Error : ".concat(n)),n})),Object(y.a)(c,E.d,(function(t,e){var n=e.payload;return alert("Error : ".concat(n)),n})),c)),S=Object(p.c)(!1,(u={},Object(y.a)(u,E.h,(function(){return!0})),Object(y.a)(u,E.i,(function(){return!1})),Object(y.a)(u,E.b,(function(){return!0})),Object(y.a)(u,E.c,(function(){return!1})),Object(y.a)(u,E.a,(function(){return!1})),Object(y.a)(u,E.e,(function(){return!0})),Object(y.a)(u,E.f,(function(){return!1})),Object(y.a)(u,E.d,(function(){return!1})),u)),k=Object(h.b)({entries:x,loading:S,error:v}),C=n(37),U=Object(p.c)("",Object(y.a)({},C.a,(function(t,e){return e.payload}))),R=n(4),q={name:null,email:null},A=Object(p.c)(q,(a={},Object(y.a)(a,R.a.registerSuccess,(function(t,e){return e.payload.user})),Object(y.a)(a,R.a.loginSuccess,(function(t,e){return e.payload.user})),Object(y.a)(a,R.a.logoutSuccess,(function(){return q})),Object(y.a)(a,R.a.getCurrentUserSuccess,(function(t,e){return e.payload})),a)),L=Object(p.c)(null,(o={},Object(y.a)(o,R.a.registerSuccess,(function(t,e){return e.payload.token})),Object(y.a)(o,R.a.loginSuccess,(function(t,e){return e.payload.token})),Object(y.a)(o,R.a.logoutSuccess,(function(){return null})),o)),N=Object(p.c)(null,(i={},Object(y.a)(i,R.a.registerError,(function(t,e){return e.payload})),Object(y.a)(i,R.a.loginError,(function(t,e){return e.payload})),Object(y.a)(i,R.a.logoutError,(function(t,e){return e.payload})),Object(y.a)(i,R.a.getCurrentUserError,(function(t,e){return e.payload})),i)),_=Object(p.c)(!1,(s={},Object(y.a)(s,R.a.registerSuccess,(function(){return!0})),Object(y.a)(s,R.a.loginSuccess,(function(){return!0})),Object(y.a)(s,R.a.getCurrentUserSuccess,(function(){return!0})),Object(y.a)(s,R.a.logoutSuccess,(function(){return!1})),Object(y.a)(s,R.a.registerError,(function(){return!1})),Object(y.a)(s,R.a.loginError,(function(){return!1})),Object(y.a)(s,R.a.getCurrentUserError,(function(){return!1})),s)),M=Object(h.b)({user:A,token:L,isLoggedIn:_,error:N}),z=n(46),T=n.n(z),w=Object(g.a)(Object(p.d)({serializableCheck:{ignoredActions:[m.a,m.f,m.b,m.c,m.d,m.e]}})),G={key:"auth",storage:T.a,whitelist:["token"]},B=Object(h.b)({items:k,filter:U}),F=Object(h.b)({auth:Object(m.g)(G,M),contacts:B}),I=Object(p.a)({reducer:F},w),J={store:I,persistor:Object(m.h)(I)},D=n(47),X=(n(58),n(33)),H=n(34),K=n(36),P=n(35),Q=n(6),V=n(28),W=n.n(V),Y=n(23),Z=n(1),$=Object(d.b)(null,(function(t){return{onLogout:function(){return t(Y.a.logout())}}}))((function(t){var e=t.email,n=t.onLogout;return Object(Z.jsxs)(Z.Fragment,{children:[Object(Z.jsx)(f.b,{className:"navLink",activeClassName:"activeNavLink",exact:!0,to:"/contacts",children:"Contacts"}),Object(Z.jsxs)("div",{className:W.a.userMenu,children:[Object(Z.jsx)("span",{className:W.a.userEmail,children:e}),Object(Z.jsx)("button",{className:W.a.logoutBtn,type:"button",onClick:n,children:"Log out"})]})]})})),tt=n(48),et=n.n(tt),nt=function(){return Object(Z.jsxs)("div",{className:et.a.userNav,children:[Object(Z.jsx)(f.b,{className:"navLink",activeClassName:"activeNavLink",exact:!0,to:"/login",children:"Login"}),Object(Z.jsx)(f.b,{className:"navLink",activeClassName:"activeNavLink",exact:!0,to:"/register",children:"Register"})]})},rt=n(19),ct=Object(d.b)((function(t){return{isAuthentificated:Object(rt.c)(t),currentUserEmail:Object(rt.a)(t)}}))((function(t){var e=t.isAuthentificated,n=t.currentUserEmail;return Object(Z.jsx)("header",{children:e?Object(Z.jsx)($,{email:n}):Object(Z.jsx)(nt,{})})})),ut=n(18),at=n(27),ot=Object(d.b)((function(t){return{isAuthentificated:Object(rt.c)(t)}}))((function(t){var e=t.component,n=t.isAuthentificated,r=t.redirectTo,c=Object(at.a)(t,["component","isAuthentificated","redirectTo"]);return Object(Z.jsx)(Q.b,Object(ut.a)(Object(ut.a)({},c),{},{render:function(t){return n?Object(Z.jsx)(e,Object(ut.a)({},t)):Object(Z.jsx)(Q.a,{to:r})}}))})),it=Object(d.b)((function(t){return{isAuthentificated:Object(rt.c)(t)}}))((function(t){var e=t.component,n=t.isAuthentificated,r=t.redirectTo,c=Object(at.a)(t,["component","isAuthentificated","redirectTo"]);return Object(Z.jsx)(Q.b,Object(ut.a)(Object(ut.a)({},c),{},{render:function(t){return n&&c.restricted?Object(Z.jsx)(Q.a,{to:r}):Object(Z.jsx)(e,Object(ut.a)({},t))}}))})),st=Object(b.lazy)((function(){return n.e(5).then(n.bind(null,85))})),bt=Object(b.lazy)((function(){return n.e(6).then(n.bind(null,86))})),jt=Object(b.lazy)((function(){return n.e(7).then(n.bind(null,87))})),lt=Object(b.lazy)((function(){return n.e(3).then(n.bind(null,84))})),Ot=Object(b.lazy)((function(){return n.e(4).then(n.bind(null,88))})),ft=function(t){Object(K.a)(n,t);var e=Object(P.a)(n);function n(){return Object(X.a)(this,n),e.apply(this,arguments)}return Object(H.a)(n,[{key:"componentDidMount",value:function(){this.props.onGetCurrentUser()}},{key:"render",value:function(){return Object(Z.jsxs)(Z.Fragment,{children:[Object(Z.jsx)(ct,{}),Object(Z.jsx)(b.Suspense,{fallback:Object(Z.jsx)("p",{children:"Loading..."}),children:Object(Z.jsxs)(Q.d,{children:[Object(Z.jsx)(it,{path:"/login",component:bt,redirectTo:"/contacts",restricted:!0}),Object(Z.jsx)(it,{path:"/register",component:jt,redirectTo:"/contacts",restricted:!0}),Object(Z.jsx)(ot,{path:"/contacts",component:lt,redirectTo:"/login"}),Object(Z.jsx)(ot,{path:"/home",component:Ot,redirectTo:"/login"}),Object(Z.jsx)(Q.b,{component:st})]})})]})}}]),n}(b.Component),dt={onGetCurrentUser:Y.a.getCurrentUser},gt=Object(d.b)(null,dt)(ft);O.a.render(Object(Z.jsx)(j.a.StrictMode,{children:Object(Z.jsx)(d.a,{store:J.store,children:Object(Z.jsx)(D.a,{loading:null,persistor:J.persistor,children:Object(Z.jsx)(f.a,{children:Object(Z.jsx)(gt,{})})})})}),document.getElementById("root"))}},[[80,1,2]]]);
//# sourceMappingURL=main.a953dd10.chunk.js.map